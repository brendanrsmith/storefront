(this.webpackJsonpstorefront=this.webpackJsonpstorefront||[]).push([[0],{97:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(18),i=r.n(a),o=r(11),s=r(33),u=r(48),d=r(49),j=r(22),l=r.n(j),p=r(30),b=r(27),h=r(25),x=r.n(h),f={categories:[],activeCategory:null},O=function(e){return{type:"GET_CATS",payload:e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case"SETCATEGORY":var n=c,a=e.categories;return{activeCategory:n,categories:a};case"GET_CATS":return{categories:c,activeCategory:f.activeCategory};case"RESET":return Object(b.a)(Object(b.a)({},e),{},{activeCategory:f.activeCategory});default:return e}},v=r(54),g={cart:[]},y=function(e){return{type:"ADDTOCART",payload:e}},R=function(e){return{type:"REMOVEFROMCART",payload:e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case"ADDTOCART":var n=c;return{cart:[].concat(Object(v.a)(e.cart),[n])};case"REMOVEFROMCART":var a=c;return{cart:e.cart.filter((function(e){return e!==a}))};case"CARTRESET":return g;default:return e}},T="https://brsmith-auth-api.herokuapp.com/api/v1/products",k={products:[]},N=function(){return function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(T);case 2:r=e.sent,t(w(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e,t){return function(){var r=Object(p.a)(l.a.mark((function r(c){var n,a,i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.a.get("".concat(T,"/").concat(e._id));case 2:return n=r.sent.data.inventory,a=Object(b.a)(Object(b.a)({},e),{},{inventory:t?n-1:n+1}),r.next=6,x.a.put("".concat(T,"/").concat(e._id),a);case 6:i=r.sent,console.log("inventory: ",i.data.inventory),i.status&&(c(t?y(i.data):R(e)),c(N()));case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},w=function(e){return{type:"GET_PRODS",payload:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,r=t.type,c=t.payload;switch(r){case"GET_PRODS":return{products:c};default:return e}},A=Object(s.combineReducers)({catReducer:m,prodReducer:D,cartReducer:C}),S=Object(s.createStore)(A,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(d.a))),_=r(125),B=(r(89),r(7)),G=r(113),F=r(115),M=r(116),W=r(117),$=r(98),z=r(118),I=r(16),J=r(2);var L=Object(o.b)((function(e){return{cartReducer:e.cartReducer}}),{})((function(e){var t=Object(G.a)({toolbar:{background:"#efefef"},link:{textDecoration:"none"},cart:{textAlign:"right"}})();return Object(J.jsxs)(n.a.Fragment,{children:[Object(J.jsx)(F.a,{position:"fixed",children:Object(J.jsx)(M.a,{className:t.toolbar,children:Object(J.jsxs)(W.a,{container:!0,children:[Object(J.jsx)(W.a,{item:!0,xs:!0,children:Object(J.jsx)($.a,{children:Object(J.jsx)(I.b,{to:"/",className:t.link,children:Object(J.jsx)(z.a,{variant:"h5",children:"Storefront"})})})}),Object(J.jsx)(W.a,{item:!0,xs:!0,className:t.cart,children:Object(J.jsx)($.a,{children:Object(J.jsx)(I.b,{to:"/cart",className:t.link,children:Object(J.jsxs)(z.a,{children:["Cart(",e.cartReducer.cart.length,")"]})})})})]})})}),Object(J.jsx)(M.a,{})]})}));var P=function(){return Object(J.jsx)("footer",{children:Object(J.jsx)(z.a,{variant:"h6",component:"p",align:"center",gutterBottom:!0,children:"\xa9 Brendan Smith 2021"})})},V=r(119);var Y=Object(o.b)((function(e){return{cartReducer:e.cartReducer}}),(function(e){return{removeFromCart:function(t){return e(E(t,!1))}}}))((function(e){var t=Object(G.a)({cart:{zIndex:100,position:"fixed",right:"16px",top:"64px",width:"140px",backgroundColor:"#eee",opacity:"0.5"},card:{display:"flex",padding:"8px"}})();return Object(J.jsx)(W.a,{item:!0,xs:!0,className:t.cart,children:e.cartReducer.cart.map((function(r){return Object(J.jsxs)(V.a,{className:t.card,children:[Object(J.jsx)(I.b,{to:"/products/".concat(r._id),children:r.name}),Object(J.jsx)($.a,{variant:"small",onClick:function(){return e.removeFromCart(r)},children:"x"})]},"".concat(r._id,":").concat(r.inventory))}))})})),U=r(120),q=Object(o.b)((function(e){return{catReducer:e.catReducer}}),(function(e){return{setActiveCategory:function(t){return e(function(e){return{type:"SETCATEGORY",payload:e}}(t))},reset:function(){return e({type:"RESET"})},get:function(){return e(function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://brsmith-auth-api.herokuapp.com/api/v1/categories");case 2:r=e.sent,t(O(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){Object(c.useEffect)((function(){var t;t&&t.preventDefault(),e.get()}),[]);var t=Object(G.a)({category:{margin:"24px"}})();return Object(J.jsxs)(W.a,{item:!0,xs:!0,className:t.category,children:[Object(J.jsx)(z.a,{gutterBottom:!0,variant:"h5",children:"Browse Categories:"}),Object(J.jsxs)(U.a,{gutterBottom:!0,color:"primary",variant:"text",children:[Object(J.jsx)($.a,{onClick:function(){return e.reset()},children:"all"}),e.catReducer.categories.map((function(t){return Object(J.jsx)($.a,{onClick:function(){return e.setActiveCategory(t.name)},children:t.displayName},t.name)}))]})]})})),H=r(121),K=r(122),Q=r(123),X=Object(o.b)((function(e){return{prodReducer:e.prodReducer,catReducer:e.catReducer}}),(function(e){return{addToCart:function(t){return e(E(t,!0))},get:function(){return e(N())}}}))((function(e){Object(c.useEffect)((function(){var t;t&&t.preventDefault(),e.get()}),[]);var t=Object(G.a)({root:{maxWidth:"100vw",padding:"8px",margin:"auto"},productGrid:{},card:{height:"100%",display:"flex",flexDirection:"column"},media:{paddingTop:"56.25%",height:140},link:{textDecoration:"none"}})();return Object(J.jsx)(W.a,{className:t.root,container:!0,spacing:4,children:e.prodReducer.products.filter((function(t){return!e.catReducer.activeCategory||t.category===e.catReducer.activeCategory})).filter((function(e){return e.inventory>0})).map((function(r){return Object(J.jsx)(W.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(J.jsxs)(V.a,{variant:"outlined",className:t.card,children:[Object(J.jsx)(H.a,{className:t.media,image:r.url,title:r.name}),Object(J.jsxs)(K.a,{children:[Object(J.jsx)(z.a,{gutterBottom:!0,variant:"h6",children:r.name}),Object(J.jsx)(z.a,{color:"textSecondary",variant:"body2",children:r.description}),Object(J.jsxs)(z.a,{variant:"body1",children:["$",r.price]})]}),Object(J.jsxs)(Q.a,{children:[Object(J.jsx)($.a,{color:"primary",onClick:function(){return e.addToCart(r)},children:"Add to cart"}),Object(J.jsx)(I.b,{to:"/products/".concat(r._id),className:t.link,children:Object(J.jsx)($.a,{color:"primary",children:"Details"})})]})]})},r.name)}))})})),Z=Object(o.b)((function(e){return{catReducer:e.catReducer}}))((function(e){return Object(J.jsx)("section",{children:Object(J.jsx)(z.a,{gutterBottom:!0,variant:"h4",align:"center",component:"h1",children:e.catReducer.activeCategory?e.catReducer.activeCategory.toUpperCase():""})})}));var ee=function(){return Object(J.jsxs)("main",{children:[Object(J.jsx)(q,{}),Object(J.jsx)(Y,{}),Object(J.jsx)(Z,{}),Object(J.jsx)(X,{})]})},te=r(56),re=r(124),ce=r(126);var ne=Object(o.b)((function(e){return{cartReducer:e.cartReducer}}),(function(e){return{removeFromCart:function(t){return e(E(t,!1))}}}))((function(e){var t=Object(G.a)({root:{maxWidth:"80vw",padding:"8px",margin:"5vh auto"},card:{height:"100%",display:"flex",flexDirection:"column"},media:{paddingTop:"56.25%",height:140},link:{textDecoration:"none"},remove:{justifySelf:"right"},li:{justifyContent:"space-between"},checkout:{width:"30%",justifyContent:"center",marginLeft:"35%"},total:{textAlign:"right",marginTop:"16px"}})(),r=e.cartReducer.cart.reduce((function(e,t){return e+t.price}),0);return Object(J.jsxs)(te.a,{className:t.root,children:[Object(J.jsx)(z.a,{variant:"h5",children:"Order Summary"}),Object(J.jsx)(re.a,{children:e.cartReducer.cart.map((function(r){return Object(J.jsxs)(ce.a,{className:t.li,children:[Object(J.jsx)(I.b,{className:t.link,to:"/products/".concat(r._id),children:Object(J.jsx)($.a,{color:"primary",children:Object(J.jsx)(z.a,{variant:"body1",children:r.name})})}),Object(J.jsx)(z.a,{variant:"body2",children:r.description}),Object(J.jsxs)(z.a,{variant:"body1",children:["$",r.price]}),Object(J.jsx)($.a,{className:"remove",size:"small",variant:"contained",color:"secondary",onClick:function(){return e.removeFromCart(r)},children:"Remove"})]},"".concat(r._id,":").concat(r.inventory))}))}),Object(J.jsxs)(z.a,{className:t.total,variant:"h6",children:["Total: $",r]}),Object(J.jsx)($.a,{className:t.checkout,variant:"contained",color:"primary",children:"Checkout"})]})}));var ae=Object(o.b)((function(e){return{prodReducer:e.prodReducer,catReducer:e.catReducer}}),(function(e){return{addToCart:function(t){return e(E(t,!0))},get:function(){return e(N())}}}))((function(e){Object(c.useEffect)((function(){var t;t&&t.preventDefault(),e.get()}),[]);var t=Object(G.a)({root:{maxWidth:"100vw",padding:"8px",margin:"auto",justifyContent:"center"},productGrid:{},card:{height:"100%",display:"flex",flexDirection:"column",padding:"8px"},media:{paddingTop:"56.25%",height:140},link:{textDecoration:"none",textDecorationLine:"none"},buy:{width:"100%"}})();return Object(J.jsx)(W.a,{className:t.root,container:!0,spacing:4,children:e.prodReducer.products.filter((function(t){return e.match.params.id===t._id})).map((function(r){return Object(J.jsx)(W.a,{item:!0,xs:8,children:Object(J.jsxs)(V.a,{className:t.card,children:[Object(J.jsx)(z.a,{variant:"h4",children:r.name}),Object(J.jsx)(z.a,{variant:"body1",children:r.description}),Object(J.jsx)(H.a,{className:t.media,image:r.url,title:r.name}),Object(J.jsxs)(K.a,{children:[Object(J.jsxs)(z.a,{children:[r.inventory," left in stock"]}),Object(J.jsxs)(z.a,{children:["$",r.price]})]}),Object(J.jsx)(Q.a,{children:Object(J.jsx)($.a,{className:t.buy,color:"primary",variant:"contained",onClick:function(){return e.addToCart(r)},children:"Buy"})})]})})}))})}));var ie=function(){return Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(_.a,{}),Object(J.jsx)(L,{}),Object(J.jsxs)(B.c,{children:[Object(J.jsx)(B.a,{exact:!0,path:"/",component:ee}),Object(J.jsx)(B.a,{path:"/cart",component:ne}),Object(J.jsx)(B.a,{path:"/products/:id",component:ae})]}),Object(J.jsx)(P,{})]})};i.a.render(Object(J.jsx)(o.a,{store:S,children:Object(J.jsx)(I.a,{basename:"/storefront",children:Object(J.jsx)(ie,{})})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.f54cb842.chunk.js.map